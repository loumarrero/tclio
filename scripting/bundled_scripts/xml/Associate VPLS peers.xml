<!-- This file is generated by system. Do not edit this file. -->
<script name="Associate VPLS peers">
  <comments>Factory script to associate VPLS peers</comments>
  <content>#@MetaDataStart
####################################################################
#########################
#@DetailDescriptionStart
####################################################################
#########
# Extreme Networks(R) CLI Scripting Library
# Note:  This script is an example and has undergone limited testing.  Please modify and test for your own environment.
# scripting.Script        : Peers addition
# Revision      : 1.0
# Last Updated  : December 15, 2009
#
# Purpose:  Create and configure a VPLS
#
#
#1.  Create Peers for a VPLS switch
####################################################################
#
#@DetailDescriptionEnd

# @ScriptDescription &quot;Basic best practice deployment of Extreme switches. Please see scripting.Script View tab for details.&quot;
# @SectionStart ( description = &quot;VPLS Basics&quot;)
# @VariableFieldLabel ( description = &quot;Abort on error?&quot;,
#    type          = String,
#   scope       = global,
#   required    = yes,
#   validValues=[yes,no])
set var abort_when_error yes

####################################################################
############
# Peer Definition
####################################################################
############
# @VariableFieldLabel (description = &quot;VPLS Name&quot;,
#      type        = String,
#      scope       = device,
#      required    = yes
#    )
set var vplsname &quot;&quot;

# @VariableFieldLabel (description = &quot;Peer IP Addresses&quot;
#      type        = String
#      scope       = device
#      required    = yes
#    )
set var peeripaddresses  &quot;&quot;

# @VariableFieldLabel (description = &quot;Peer Type&quot;
#      type        = String
#      validValues = [core full-mesh, core primary, core secondary, spoke]
#      scope       = device
#      required    = yes
#    )
set var peerType core full-mesh
# @SectionEnd

#@MetaDataEnd
####################################################################
############
# CONFIGURATION DETAIL
####################################################################
############
####################################################################
############
# CLI MODE
####################################################################
############
IF ($abort_when_error == no) THEN
 configure cli mode scripting ignore-error
ELSE
  configure cli mode scripting abort-on-error
ENDIF

IF (![string equal $vendor &quot;Extreme&quot;]) THEN
   error &quot;This script is only supported for Extreme switches.&quot;
ENDIF

####################################################################
############
# Peer Addition Parameters
####################################################################
############
if {[catch {
    IF ([expr [string length $vplsname] &gt; 0]) THEN
        # As of now, comma separated values are not parsed. Only a single valid
        # IP address needs to be given.
        configure vpls $vplsname add peer $peeripaddresses $peerType
    ENDIF
    PerformSync -scope VPLS
    PerformSync -scope MPLS
} result ]} {
     error &quot;Error occured during vpls configuration. $result&quot;
   }</content>
  <contexts>,VPLS Services,Device,</contexts>
  <supprotedGroups></supprotedGroups>
  <roles>,Administrator,Manager,</roles>
  <auditLogEnabled>false</auditLogEnabled>
  <saveConfigOnExit>false</saveConfigOnExit>
  <menuScope>TOOLS</menuScope>
  <scriptTimeout>60</scriptTimeout>
  <defaultCategory>VPLS</defaultCategory>
  <creator>system</creator>
</script>