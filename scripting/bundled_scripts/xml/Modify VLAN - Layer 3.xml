<!-- This file is generated by system. Do not edit this file. -->
<script name="Modify VLAN - Layer 3">
  <comments>Factory script to assign remove ip address enable disable ip forwarding on an existing vlan</comments>
  <content># @METADATASTART
#@DetailDescriptionStart
#############################################################################
# Extreme Networks(R) CLI Scripting Library
# Note:  This script is an example and has undergone limited testing.  Please modify and test for your own environment.
# scripting.Script        : VLAN Modification
# Revision      : 1.1
# Last Updated  : November 21, 2014
#
# Purpose:  Assign an IPAddress and optionally subnet to an existing VLAN. If you plan to use VLAN as
# a control VLAN for an EAPS domain, do not configure VLAN with IP Address.
# Specifically this script:
#  - Remove assigned IP Address from the VLAN
#  - Assign new IP Address to the VLAN
#  - Assign subnet to the VLAN     
#
#####################################################################
#@DetailDescriptionEnd
# @ScriptDescription &quot;Simple script to configure already created VLAN.&quot;
# @SectionStart (description = Selected VLAN properties (&quot;Only shown if script is run from vlan view&quot;))
# @VariableFieldLabel ( description = &quot;Vlan name&quot;,
#    type          = VLAN_NAME,
#   scope       = global,
#   required    = yes, 
#   readonly     = no
#)
set var vlanname ExtremeVlan1

# @SectionEnd


# @SectionStart    ( description = &quot;Configure VLAN IP address&quot;)
# @VariableFieldLabel ( description = &quot;Abort on error?&quot;,
#    type          = String,
#   scope       = global,
#   required    = yes, 
#   validValues=[yes,no])
set var abort_when_error yes

# @VariableFieldLabel (description   = &quot;Remove primary IP address&quot;,
#      type          = String,  validValues=[yes,no],
#     scope         = device
#    )
set var removeprimaryipaddress no


# @VariableFieldLabel (description   = &quot;New IP address (x.x.x.x)&quot;,
#      type          = String,
#     scope         = device
#    )
set var newipaddress &quot;&quot;

# @VariableFieldLabel (description   = &quot;Subnet mask (x.x.x.x)&quot;,
#      type          = String,
#     scope         = device
#    )
set var subnetmask &quot;&quot;

# @VariableFieldLabel (description   = &quot;VLAN IP forwarding setting?&quot;,
#      validValues=[Keep current setting,enable,disable],
#     scope         = device
#    )
set var ipforwardingSetting &quot;Keep current setting&quot;



# @SectionEnd
# @MetaDataEnd
################################################################################
################################################################################
#                    CONFIGURATION DETAIL
################################################################################
################################################################################

################################################################################
# CLI MODE
################################################################################
IF ($abort_when_error == no ) THEN
 configure cli mode scripting ignore-error
ELSE
  configure cli mode scripting abort-on-error
ENDIF

IF (![string equal $vendor &quot;Extreme&quot;]) THEN
   error &quot;This script is only supported for Extreme switches.&quot;
ENDIF

IF ([string equal $removeprimaryipaddress yes]) THEN
   unconfig vlan $vlanname ipaddress
ENDIF

IF ([expr [string length $newipaddress] &gt; 0]) THEN
   IF ([expr [string length $subnetmask] &gt; 0]) THEN
      config vlan $vlanname ipaddress $newipaddress $subnetmask
   ELSE
      config vlan $vlanname ipaddress $newipaddress   
   ENDIF
ENDIF


IF (![string equal $ipforwardingSetting &quot;Keep current setting&quot;]) THEN
   CLI $ipforwardingSetting  ipforwarding vlan $vlanname
ENDIF

# sync this vlan in the server
PerformSync -scope VLAN -vlan $vlanname

</content>
  <creator>system</creator>
  <contexts>,VLANS,Device,</contexts>
  <supprotedGroups></supprotedGroups>
  <roles>,Administrator,</roles>
  <auditLogEnabled>false</auditLogEnabled>
  <saveConfigOnExit>false</saveConfigOnExit>
  <menuScope>TOOLS</menuScope>
  <scriptTimeout>60</scriptTimeout>
  <defaultCategory>VLAN</defaultCategory>
</script>